<p id="notice"><%= notice %></p>

<h1>Contatos</h1>

<%= form_tag contatos_path, :method => 'get' do %>
<p>
    <%= select_tag :f_tipo_nome,
        options_for_select(["Igual a", "Contém", "Começa com", "Termina com"]),
        :include_blank => false %>
    <%= text_field_tag :f_nome, params[:f_nome] %>
    <%= select_tag :f_clause_nome,
        options_for_select([["e", " and "], ["ou", " or "]]),
        :include_blank => false %>
<br>
    <%= select_tag :f_tipo_email,
        options_for_select(["Igual a", "Contém", "Começa com", "Termina com"]),
        :include_blank => false %>
    <%= text_field_tag :f_email, params[:f_email] %>
    <%= select_tag :f_clause_email,
        options_for_select([["e", " and "], ["ou", " or "]]),
        :include_blank => false %>
<br>
    <%= select_tag :f_tipo_idade,
        options_for_select(["=", "<", "<=", ">", ">="]),
        :include_blank => false %>
    <%= text_field_tag :f_idade, params[:f_idade] %>
    <%= select_tag :f_clause_idade,
        options_for_select([["e", " and "], ["ou", " or "]]),
        :include_blank => false %>
<br>
    <%= select_tag :f_tipo_cargo,
        options_for_select(["Igual a", "Contém", "Começa com", "Termina com"]),
        :include_blank => false %>
    <%= text_field_tag :f_cargo, params[:f_cargo] %>
    <%= select_tag :f_clause_cargo,
        options_for_select([["e", " and "], ["ou", " or "]]),
        :include_blank => false %>
<br>
<%= select_tag :f_estado,
    options_from_collection_for_select(Estado.all, 'id', 'nome'),
    :include_blank => true, :prompt => "Selecione o Estado" %>
    <%= submit_tag "Segmentar", :name => nil %>
</p>
<% end %>

<table>
    <thead>
        <tr>
            <th>Nome</th>
            <th>Email</th>
            <th>Idade</th>
            <th>Estado</th>
            <th>Cargo</th>
            <th colspan="3"></th>
        </tr>
    </thead>
    <tbody>
        <% if @contatos.present? %>
            <% @contatos.each do |contato| %>
                <tr>
                    <td><%= contato.nome %></td>
                    <td><%= contato.email %></td>
                    <td><%= contato.idade %></td>
                    <td><%= contato.estado.sigla %></td>
                    <td><%= contato.cargo %></td>
                    <td><%= link_to 'Show', contato %></td>
                    <td><%= link_to 'Edit', edit_contato_path(contato) %></td>
                    <td><%= link_to 'Destroy', contato, method: :delete, data: { confirm: 'Are you sure?' } %></td>
                </tr>
            <% end %>
        <% else %>
            <tr>
                <td>There are no posts containing the term(s) <%= params[:search] %>.</td>
            </tr>
        <% end %>
    </tbody>
</table>

<br>

<%= link_to 'New Contato', new_contato_path %>
